<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecretSwap.fun - Échangez vos secrets anonymement</title>
    <style>
        :root {
            --coral: #FF7F50;
            --lavender: #9370DB;
            --dark-purple: #6A5ACD;
            --light-bg: #f8f9fa;
            --card-bg: #ffffff;
            --text-dark: #343a40;
            --text-light: #6c757d;
            --success: #28a745;
            --danger: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--light-bg) 0%, #e6e9f0 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            max-width: 800px;
            width: 100%;
        }
        
        .logo {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo-icon {
            font-size: 3.5rem;
            margin-right: 15px;
            color: var(--dark-purple);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: var(--dark-purple);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        .tagline {
            font-size: 1.3rem;
            color: var(--text-light);
            margin-bottom: 25px;
        }
        
        .container {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 800px;
            width: 100%;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, var(--coral), var(--lavender));
        }
        
        .step {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .step:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--dark-purple);
            display: flex;
            align-items: center;
        }
        
        h2 span {
            background: var(--lavender);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2rem;
        }
        
        .secret-input {
            width: 100%;
            min-height: 150px;
            padding: 20px;
            font-size: 1.1rem;
            border: 2px dashed #e0e0e0;
            border-radius: 12px;
            resize: vertical;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .secret-input:focus {
            outline: none;
            border-color: var(--lavender);
            box-shadow: 0 0 0 3px rgba(147, 112, 219, 0.2);
        }
        
        .char-count {
            text-align: right;
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        
        .emotion-selector {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .emotion-btn {
            font-size: 2.5rem;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .emotion-btn:hover {
            transform: scale(1.15);
            background: rgba(147, 112, 219, 0.1);
        }
        
        .emotion-btn.selected {
            transform: scale(1.15);
            background: rgba(147, 112, 219, 0.2);
            box-shadow: 0 0 0 3px var(--lavender);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, var(--coral), var(--lavender));
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.3rem;
            border-radius: 50px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: 0 5px 15px rgba(147, 112, 219, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(147, 112, 219, 0.4);
        }
        
        .submit-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-container {
            text-align: center;
            padding: 30px;
            background: rgba(147, 112, 219, 0.05);
            border-radius: 15px;
            margin-top: 30px;
            display: none;
        }
        
        .secret-result {
            font-size: 1.4rem;
            line-height: 1.6;
            margin: 25px 0;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
            font-style: italic;
        }
        
        .secret-result::before,
        .secret-result::after {
            content: '"';
            font-size: 3rem;
            position: absolute;
            color: rgba(147, 112, 219, 0.2);
        }
        
        .secret-result::before {
            top: -5px;
            left: 15px;
        }
        
        .secret-result::after {
            bottom: -35px;
            right: 15px;
        }
        
        .response-section {
            margin-top: 30px;
        }
        
        .response-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            margin: 0 10px;
        }
        
        .response-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(40, 167, 69, 0.3);
        }
        
        .premium-badge {
            background: linear-gradient(135deg, #ffd700, #ffa500);
            color: #333;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 5px;
            vertical-align: middle;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--text-light);
            max-width: 800px;
            width: 100%;
        }
        
        .features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            width: 220px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--lavender);
        }
        
        .feature h3 {
            margin-bottom: 10px;
            color: var(--dark-purple);
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .spinner {
            border: 5px solid rgba(147, 112, 219, 0.2);
            border-top: 5px solid var(--lavender);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .how-it-works {
            background: linear-gradient(135deg, #6A5ACD, #9370DB);
            color: white;
            padding: 60px 0;
            width: 100%;
            text-align: center;
            margin: 40px 0;
        }
        
        .how-it-works h2 {
            color: white;
            margin-bottom: 40px;
            text-align: center;
            font-size: 2.5rem;
        }
        
        .steps {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .step-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 30px;
            width: 280px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .step-number {
            position: absolute;
            top: 15px;
            right: 15px;
            background: white;
            color: var(--dark-purple);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .step-icon {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: white;
        }
        
        .step-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: white;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .container {
                padding: 20px;
            }
            
            .emotion-btn {
                font-size: 2rem;
                width: 70px;
                height: 70px;
            }
            
            .secret-result {
                font-size: 1.2rem;
                padding: 20px;
            }
            
            .step-card {
                width: 100%;
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <div class="logo-icon">🤫</div>
            <h1>SecretSwap<span class="fun">.fun</span></h1>
        </div>
        <p class="tagline">Échangez vos secrets anonymement et recevez un secret en retour</p>
    </header>
    
    <div class="container">
        <div class="step">
            <h2><span>1</span> Partagez votre secret</h2>
            <textarea 
                id="secretInput" 
                class="secret-input" 
                placeholder="Écrivez ici ce qui vous pèse... (max 200 caractères)"></textarea>
            <div class="char-count"><span id="charCount">0</span>/200 caractères</div>
        </div>
        
        <div class="step">
            <h2><span>2</span> Choisissez votre émotion</h2>
            <div class="emotion-selector">
                <button class="emotion-btn" data-emotion="😊">😊</button>
                <button class="emotion-btn" data-emotion="😢">😢</button>
                <button class="emotion-btn" data-emotion="😠">😠</button>
                <button class="emotion-btn" data-emotion="😳">😳</button>
            </div>
        </div>
        
        <button id="submitBtn" class="submit-btn" disabled>Partager anonymement</button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Recherche d'un secret similaire...</p>
        </div>
        
        <div class="result-container" id="resultContainer">
            <h2>Voici un secret similaire au vôtre :</h2>
            <div class="secret-result" id="secretResult">
                Chargement de votre secret...
            </div>
            
            <div class="response-section">
                <p>Envie de soutenir cette personne anonymement ?</p>
                <button class="response-btn" id="freeResponse">Envoyer un message gratuit</button>
                <button class="response-btn" id="premiumResponse">Envoyer un GIF animé <span class="premium-badge">1€</span></button>
            </div>
        </div>
    </div>
    
    <div class="how-it-works">
        <h2>Comment ça fonctionne ?</h2>
        <div class="steps">
            <div class="step-card">
                <div class="step-icon">🔒</div>
                <div class="step-number">1</div>
                <h3>Partagez anonymement</h3>
                <p>Écrivez votre secret et choisissez votre émotion actuelle.</p>
            </div>
            <div class="step-card">
                <div class="step-icon">🔄</div>
                <div class="step-number">2</div>
                <h3>Recevez un secret</h3>
                <p>Obtenez instantanément un secret d'une personne ressentant la même chose.</p>
            </div>
            <div class="step-card">
                <div class="step-icon">💌</div>
                <div class="step-number">3</div>
                <h3>Soutenez les autres</h3>
                <p>Envoyez un message de soutien ou un GIF réconfortant.</p>
            </div>
            <div class="step-card">
                <div class="step-icon">🦊</div>
                <div class="step-number">4</div>
                <h3>Libérez-vous</h3>
                <p>Partagez ce que vous ne pouvez dire à personne d'autre.</p>
            </div>
        </div>
    </div>
    
    <div class="container">
        <h2>Vos secrets sont en sécurité</h2>
        <div class="features">
            <div class="feature">
                <div class="feature-icon">🔐</div>
                <h3>Anonymat total</h3>
                <p>Aucune information personnelle n'est collectée ou stockée.</p>
            </div>
            <div class="feature">
                <div class="feature-icon">🔄</div>
                <h3>Échanges instantanés</h3>
                <p>Recevez un secret similaire dès que vous partagez le vôtre.</p>
            </div>
            <div class="feature">
                <div class="feature-icon">💖</div>
                <h3>Communauté bienveillante</h3>
                <p>Un espace sans jugement pour se libérer.</p>
            </div>
        </div>
    </div>
    
    <footer>
        <p>© 2025 SecretSwap.fun - Tous droits réservés</p>
        <p>Un espace anonyme et bienveillant pour partager ce qui vous pèse</p>
        <p><a href="#" style="color: var(--lavender); text-decoration: none;">Politique de confidentialité</a> | <a href="#" style="color: var(--lavender); text-decoration: none;">Conditions d'utilisation</a></p>
    </footer>

    <script>
        // Configuration - À MODIFIER AVEC VOS INFORMATIONS
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwA_oyGjr7lMbyGUW4FIGeNUDgKd2eQaLMHXe9L5sJ0-NGX6zIMmHbV_GnmZMGMHsGp/exec";
        
        // Éléments du DOM
        const secretInput = document.getElementById('secretInput');
        const charCount = document.getElementById('charCount');
        const emotionBtns = document.querySelectorAll('.emotion-btn');
        const submitBtn = document.getElementById('submitBtn');
        const loading = document.getElementById('loading');
        const resultContainer = document.getElementById('resultContainer');
        const secretResult = document.getElementById('secretResult');
        const freeResponseBtn = document.getElementById('freeResponse');
        const premiumResponseBtn = document.getElementById('premiumResponse');
        
        let selectedEmotion = null;
        
        // Mise à jour du compteur de caractères
        secretInput.addEventListener('input', () => {
            const text = secretInput.value;
            charCount.textContent = text.length;
            
            // Activer/désactiver le bouton selon la longueur
            if (text.length > 0 && text.length <= 200 && selectedEmotion) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        });
        
        // Sélection des émotions
        emotionBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Retirer la sélection précédente
                emotionBtns.forEach(b => b.classList.remove('selected'));
                
                // Sélectionner la nouvelle émotion
                btn.classList.add('selected');
                selectedEmotion = btn.dataset.emotion;
                
                // Activer le bouton si le texte est valide
                if (secretInput.value.length > 0 && secretInput.value.length <= 200) {
                    submitBtn.disabled = false;
                }
            });
        });
        
        // Soumission du secret
        submitBtn.addEventListener('click', async () => {
            const secret = secretInput.value;
            
            // Afficher l'indicateur de chargement
            loading.style.display = 'block';
            submitBtn.disabled = true;
            
            try {
                // Envoyer les données à Google Sheets
                const response = await fetch(
                    `${SCRIPT_URL}?secret=${encodeURIComponent(secret)}&emotion=${selectedEmotion}`
                );
                
                if (response.ok) {
                    // Simuler un délai pour la recherche d'un secret similaire
                    setTimeout(() => {
                        // Cacher le chargement
                        loading.style.display = 'none';
                        
                        // Afficher un secret aléatoire (simulation)
                        const sampleSecrets = [
                            "Je fais semblant d'être heureux tous les jours alors que je suis déprimé.",
                            "J'ai triché lors de mon dernier examen important.",
                            "Je regrette mon choix de carrière mais j'ai peur de tout changer maintenant.",
                            "Je suis secrètement amoureux de mon meilleur ami.",
                            "Je cache une dette importante à ma famille."
                        ];
                        
                        const randomSecret = sampleSecrets[Math.floor(Math.random() * sampleSecrets.length)];
                        secretResult.textContent = randomSecret;
                        
                        // Afficher le résultat
                        resultContainer.style.display = 'block';
                        
                        // Réinitialiser le formulaire
                        secretInput.value = '';
                        charCount.textContent = '0';
                        emotionBtns.forEach(b => b.classList.remove('selected'));
                        selectedEmotion = null;
                        submitBtn.disabled = true;
                        
                        // Faire défiler jusqu'au résultat
                        resultContainer.scrollIntoView({ behavior: 'smooth' });
                    }, 2000);
                } else {
                    throw new Error('Erreur lors de la sauvegarde');
                }
            } catch (error) {
                loading.style.display = 'none';
                submitBtn.disabled = false;
                alert("Une erreur est survenue : " + error.message);
            }
        });
        
        // Gestion des réponses
        freeResponseBtn.addEventListener('click', () => {
            alert("Votre message de soutien a été envoyé ! Merci pour votre bienveillance ❤️");
        });
        
        premiumResponseBtn.addEventListener('click', () => {
            alert("Fonctionnalité premium à venir ! Bientôt, vous pourrez envoyer des GIF réconfortants pour 1€.");
        });
        
        // Animation d'entrée
        setTimeout(() => {
            document.body.style.opacity = 1;
        }, 100);
    </script>
</body>
</html>